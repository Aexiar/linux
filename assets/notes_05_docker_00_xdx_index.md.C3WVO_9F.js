import{_ as s,c as i,o as a,a6 as l}from"./chunks/framework.C9_wgXi1.js";const n="/linux/assets/1.DmiFIqcy.svg",e="/linux/assets/2.BasYWvkM.png",t="/linux/assets/3.CjFxJpBr.png",p="/linux/assets/4.Dm5Jspvp.gif",r="/linux/assets/5.1krCh8cy.gif",h="/linux/assets/6.DOSyahv7.gif",o="/linux/assets/7.BHEvX_FI.gif",d="/linux/assets/8.DFA0g1_d.gif",c="/linux/assets/9.D50nO5eA.gif",u="/linux/assets/10.cAvG1Qfq.png",k="/linux/assets/11.DpakQFWz.gif",g="/linux/assets/12.C3wekjfY.png",b="/linux/assets/13.CKuuzuQ_.png",m="/linux/assets/14.B4r6Nv14.gif",E="/linux/assets/15.CvbhuZNK.png",D=JSON.parse('{"title":"第一章：WSL2 是什么？","description":"","frontmatter":{},"headers":[],"relativePath":"notes/05_docker/00_xdx/index.md","filePath":"notes/05_docker/00_xdx/index.md","lastUpdated":1724294673000}'),v={name:"notes/05_docker/00_xdx/index.md"},_=l('<h1 id="第一章-wsl2-是什么" tabindex="-1">第一章：WSL2 是什么？ <a class="header-anchor" href="#第一章-wsl2-是什么" aria-label="Permalink to &quot;第一章：WSL2 是什么？&quot;">​</a></h1><h2 id="_1-1-概述" tabindex="-1">1.1 概述 <a class="header-anchor" href="#_1-1-概述" aria-label="Permalink to &quot;1.1 概述&quot;">​</a></h2><ul><li>WSL2，全称为 Windows Subsystem for Linux 2，是微软提供的一种技术，允许用户在 Windows 操作系统上运行 Linux 内核。WSL2 是 WSL1 的升级版，它引入了一个真正的 Linux 内核来代替 WSL1 中使用的兼容层，从而提供更高的性能和更广泛的系统调用支持。</li><li>和传统的虚拟化技术的对比，如下所示：</li></ul><p><img src="'+n+'" alt="116"></p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><p>之所以，WSL2 比传统的虚拟化技术，如：VMWare 等，更轻量和高性能，是因为 WSL2 是作用在系统层的，是可以直接调用底层硬件的，而 VMWare 等需要操作系统提供支持。</p></div><h2 id="_1-2-wsl2-的功能" tabindex="-1">1.2 WSL2 的功能 <a class="header-anchor" href="#_1-2-wsl2-的功能" aria-label="Permalink to &quot;1.2 WSL2 的功能&quot;">​</a></h2><ul><li>① <strong>真实的 Linux 内核</strong>：WSL2 使用了微软开发的轻量级虚拟机，它包含了一个完整的 Linux 内核。这意味着 WSL2 能够运行更多的 Linux 应用程序，并且支持更多的系统调用。</li><li>② <strong>文件系统性能提升</strong>：WSL2 的文件系统性能比 WSL1 有显著提升。对于 I/O 密集型的操作，如：编译代码或数据库操作，WSL2 能够提供更快的速度。</li><li>③ <strong>兼容性增强</strong>：由于使用了真实的 Linux 内核，WSL2 对 Linux 应用程序的兼容性大幅提高。许多在 WSL1 上不能运行或需要调整的应用程序，可以在 WSL2 上直接运行。</li><li>④ <strong>网络功能改进</strong>：WSL2 提供了更好的网络集成，能够更容易地与 Windows 上的其他网络资源进行交互。</li><li>⑤ <strong>资源使用优化</strong>：WSL2 使用轻量级虚拟机，比传统的虚拟机占用更少的资源，同时提供了类似的隔离和安全性。</li></ul><h2 id="_1-3-wsl2-的用途" tabindex="-1">1.3 WSL2 的用途 <a class="header-anchor" href="#_1-3-wsl2-的用途" aria-label="Permalink to &quot;1.3 WSL2 的用途&quot;">​</a></h2><ul><li>① <strong>开发环境</strong>：WSL2 为开发者提供了一个原生的 Linux 开发环境，而无需离开 Windows 。这对于需要在 Linux 上开发、测试或运行应用程序的开发者非常有帮助。</li><li>② <strong>学习和实验</strong>：用户可以使用 WSL2 在 Windows 上学习和实验 Linux 命令行工具和应用程序，而无需设置双重引导系统或安装虚拟机。</li><li>③ <strong>多平台开发</strong>：对于跨平台开发者来说，WSL2 允许他们在一个操作系统上同时进行 Windows 和 Linux 平台的开发和测试，提高工作效率。</li><li>④ <strong>运行 Linux 工具和应用程序</strong>：WSL2 支持在 Windows 上直接运行各种 Linux 工具和应用程序，如：Docker、数据库、编程语言环境等。</li></ul><h1 id="第二章-wsl2-的安装和配置" tabindex="-1">第二章：WSL2 的安装和配置 <a class="header-anchor" href="#第二章-wsl2-的安装和配置" aria-label="Permalink to &quot;第二章：WSL2 的安装和配置&quot;">​</a></h1><h2 id="_2-1-wsl2-的安装" tabindex="-1">2.1 WSL2 的安装 <a class="header-anchor" href="#_2-1-wsl2-的安装" aria-label="Permalink to &quot;2.1 WSL2 的安装&quot;">​</a></h2><ul><li>① BIOS 或 UEFI 中，开启虚拟化：步骤略。</li></ul><p><img src="'+e+'" alt=""></p><ul><li>② 查看是否开启了虚拟化：</li></ul><p><img src="'+t+'" alt=""></p><ul><li>③ 启用适用于 Linux 的 Windows 子系统：</li></ul><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dism.exe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">online </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">enable-feature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">featurename:Microsoft</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Windows</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Subsystem</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Linux </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">all </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">norestart</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p></p><p>以管理员身份打开 PowerShell 并运行，执行完上述命令之后，如果提示需要重启计算机，那就重启计算机！！！</p></div><p><img src="'+p+'" alt=""></p><ul><li>④ 启用虚拟机功能：</li></ul><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">dism.exe</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">online </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">enable-feature</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> /</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">featurename:VirtualMachinePlatform </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">all </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">norestart</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p></p><p>以管理员身份打开 PowerShell 并运行，执行完上述命令之后，如果提示需要重启计算机，那就重启计算机！！！</p></div><p><img src="'+r+'" alt=""></p><ul><li>⑤ 更新 Linux 内核包：</li></ul><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">update</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><p>wsl2 的最新 Linux 内核包托管在 GitHub 上，某些国家可能会污染 Github 相关的域名，那么就需要手动下载，然后安装即可，下载地址在<a href="https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi" target="_blank" rel="noreferrer">这里</a>。</p></div><p><img src="'+h+'" alt=""></p><ul><li>⑥ 将 wsl2 设置为默认版本：</li></ul><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set-default</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">version </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+o+'" alt=""></p><ul><li>⑦ 查看官方在线支持的 Linux 版本：</li></ul><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">list </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">online</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+d+'" alt=""></p><ul><li>⑧ 安装指定版本的 Linux ：</li></ul><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">install Ubuntu</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">24.04</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p></p><p>官方支持的 Linux 版本，托管在 Github 上，某些国家可能会污染 Github 的域名；此时，要么走科学上网，要么在 <code>Microsoft Store</code> 中搜索并安装。</p></div><p><img src="'+c+'" alt=""></p><ul><li>⑨ 在 Microsoft Store 中搜索并安装（可选）：</li></ul><p><img src="'+u+'" alt=""></p><ul><li>⑩ 查询本地安装的 Linux 版本：</li></ul><div class="language-powershell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">list</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+k+'" alt="126"></p><h2 id="_2-2-wsl2-的配置" tabindex="-1">2.2 WSL2 的配置 <a class="header-anchor" href="#_2-2-wsl2-的配置" aria-label="Permalink to &quot;2.2 WSL2 的配置&quot;">​</a></h2><ul><li>在安装和配置 WSL2 之后，可能会出现如下的提示，即：</li></ul><p><img src="'+g+`" alt=""></p><ul><li>那么，只需要修改 <code>%USERPROFILE%\\.wslconfig</code>文件，内容如下：</li></ul><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>[wsl2]</span></span>
<span class="line"><span>networkingMode=mirrored</span></span>
<span class="line"><span>dnsTunneling=true</span></span>
<span class="line"><span>firewall=true</span></span>
<span class="line"><span>autoProxy=true</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[experimental]</span></span>
<span class="line"><span># requires dnsTunneling but are also OPTIONAL</span></span>
<span class="line"><span>bestEffortDnsParsing=true</span></span>
<span class="line"><span>useWindowsDnsCache=true</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="`+b+'" alt=""></p><ul><li>在命令行中，执行如下的命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wsl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --shutdown</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="'+m+'" alt=""></p><ul><li>此时，再打开终端，就没有这种提示了：</li></ul><p><img src="'+E+'" alt=""></p>',53),y=[_];function x(w,L,S,W,F,C){return a(),i("div",null,y)}const A=s(v,[["render",x]]);export{D as __pageData,A as default};
