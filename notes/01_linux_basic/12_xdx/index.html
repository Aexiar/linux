<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    
    <title>第一章：安装 oh-my-zsh（可选） | Hi，终于等到你</title>
    <meta name="description" content="许大仙前端、Java、大数据、云原生">
    <meta name="generator" content="VitePress v1.1.4">
    <link rel="preload stylesheet" href="/linux/assets/style.yTGmlotV.css" as="style">
    
    <script type="module" src="/linux/assets/app.CQ-RMoOf.js"></script>
    <link rel="preload" href="/linux/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/linux/assets/chunks/theme.CEDJvGC4.js">
    <link rel="modulepreload" href="/linux/assets/chunks/framework.Bk-vmp8N.js">
    <link rel="modulepreload" href="/linux/assets/notes_01_linux_basic_12_xdx_index.md.vcmOmoue.lean.js">
    <link rel="shortcut icon" href="/linux//favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no,shrink-to-fit=no">
    <meta name="keywords" content="许大仙,许大仙的博客">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar has-sidebar top" data-v-ae24b3ad data-v-ccf7ddec><div class="wrapper" data-v-ccf7ddec><div class="container" data-v-ccf7ddec><div class="title" data-v-ccf7ddec><div class="VPNavBarTitle has-sidebar" data-v-ccf7ddec data-v-ab179fa1><a class="title" href="/linux/" data-v-ab179fa1><!--[--><!--]--><!--[--><img class="VPImage logo" src="/linux/logo.svg" alt data-v-8426fc1a><!--]--><span data-v-ab179fa1>许大仙</span><!--[--><!--]--></a></div></div><div class="content" data-v-ccf7ddec><div class="content-body" data-v-ccf7ddec><!--[--><!--]--><div class="VPNavBarSearch search" data-v-ccf7ddec><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-ccf7ddec data-v-7f418b0f><span id="main-nav-aria-label" class="visually-hidden" data-v-7f418b0f>Main Navigation</span><!--[--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://aexiar.github.io/" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://aexiar.github.io/coa4/notes/" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>计组4件套</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://aexiar.github.io/web-design/notes/" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>前端</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://aexiar.github.io/java/notes/" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>Java</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://aexiar.github.io/big-data/notes/" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>大数据</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/linux/notes/" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>云原生</span><!--]--></a><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://aexiar.github.io/open-software/notes/" target="_blank" rel="noreferrer" tabindex="0" data-v-7f418b0f data-v-9c663999><!--[--><span data-v-9c663999>开源软件</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-ccf7ddec data-v-e6aabb21><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-e6aabb21 data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-ccf7ddec data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Aurorxa" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-ccf7ddec data-v-d0bd9dde data-v-b6c34ac9><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-b6c34ac9><span class="vpi-more-horizontal icon" data-v-b6c34ac9></span></button><div class="menu" data-v-b6c34ac9><div class="VPMenu" data-v-b6c34ac9 data-v-e7ea1737><!----><!--[--><!--[--><!----><div class="group" data-v-d0bd9dde><div class="item appearance" data-v-d0bd9dde><p class="label" data-v-d0bd9dde>Appearance</p><div class="appearance-action" data-v-d0bd9dde><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="Switch to dark theme" aria-checked="false" data-v-d0bd9dde data-v-d1f28634 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-d1f28634></span><span class="vpi-moon moon" data-v-d1f28634></span><!--]--></span></span></button></div></div></div><div class="group" data-v-d0bd9dde><div class="item social-links" data-v-d0bd9dde><div class="VPSocialLinks social-links-list" data-v-d0bd9dde data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Aurorxa" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-eee4e7cb><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-ccf7ddec data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-ccf7ddec><div class="divider-line" data-v-ccf7ddec></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>返回顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-575e6a36><div class="curtain" data-v-575e6a36></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-575e6a36><span class="visually-hidden" id="sidebar-aria-label" data-v-575e6a36> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-575e6a36><section class="VPSidebarItem level-0 collapsible has-active" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><h2 class="text" data-v-b8d55f3b>Linux基础</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b8d55f3b><span class="vpi-chevron-right caret-icon" data-v-b8d55f3b></span></div></div><div class="items" data-v-b8d55f3b><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/00_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>计算机硬件与组成原理基础</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/01_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 初识和安装</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/02_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 基础和入门</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/03_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 核心目录和必会命令</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/04_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 目录进阶（一）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/05_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 目录进阶（二）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/06_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 文件管理体系</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/07_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 标准 IO、重定向和管道</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/08_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>文本编辑器之神 VIM</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/09_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 四剑客（一）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/10_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>正则表达式</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/11_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>SHELL 脚本编程（一）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/12_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 用户管理体系</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/13_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 权限管理体系</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/14_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 之快速安装 Ubuntu</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/15_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 软件包管理（一）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/16_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 软件包管理（二）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/17_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 四剑客（二）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/18_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 磁盘存储和文件系统管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/19_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>计算机网络基础</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/20_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 网络管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/21_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>SHELL 脚本编程（二）</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/22_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 进程管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/23_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 定时任务管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/24_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>Linux 启动和内核管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/25_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>加密和安全</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/26_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>运维自动化之系统部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b8d55f3b data-v-b8d55f3b><div class="item" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><a class="VPLink link link" href="/linux/notes/01_linux_basic/27_xdx/" data-v-b8d55f3b><!--[--><p class="text" data-v-b8d55f3b>域名系统 DNS 服务</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>Linux集群</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>Linux自动化</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>Linux日志收集</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>云原生生态</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>虚拟化和云计算</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>容器管理工具Docker</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>容器管理工具Containerd</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>Kubernetes</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>数据库</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>微服务治理和服务网格</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>下一代云计算技术Serverless</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>基于Kubernetes构建大数据库生态圈</p><!----></div><!----></div></div><div class="group" data-v-575e6a36><div class="VPSidebarItem level-0 collapsible collapsed" data-v-575e6a36 data-v-b8d55f3b><div class="item" role="button" tabindex="0" data-v-b8d55f3b><div class="indicator" data-v-b8d55f3b></div><p class="text" data-v-b8d55f3b>其它</p><!----></div><!----></div></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" role="navigation" data-v-3f215769 data-v-269c27a6><div class="content" data-v-269c27a6><div class="outline-marker" data-v-269c27a6></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-269c27a6>目录</div><ul class="VPDocOutlineItem root" data-v-269c27a6 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _linux_notes_01_linux_basic_12_xdx_" data-v-39a288b8><div><h1 id="第一章-安装-oh-my-zsh-可选" tabindex="-1">第一章：安装 oh-my-zsh（可选） <a class="header-anchor" href="#第一章-安装-oh-my-zsh-可选" aria-label="Permalink to &quot;第一章：安装 oh-my-zsh（可选）&quot;">​</a></h1><h2 id="_1-1-概述" tabindex="-1">1.1 概述 <a class="header-anchor" href="#_1-1-概述" aria-label="Permalink to &quot;1.1 概述&quot;">​</a></h2><ul><li>Zsh（Z Shell）是一个功能强大的命令行解释器，它是对 Bash 的一个扩展，提供了许多增强的功能，如：更智能的命令行补全、强大的脚本功能、主题和插件支持等。Zsh 的设计目标是提供一种更友好、更高效的命令行体验，同时保持与 Bash 的兼容性。</li><li>Oh My Zsh 是一个开源的、社区驱动的框架，用于管理 Zsh 配置。它提供了一个易于使用的界面来安装和管理 Zsh 的配置、插件和主题。Oh My Zsh 使得定制和扩展 Zsh 的功能变得更加简单，它包含了大量的预定义主题和插件，可以帮助用户快速搭建一个个性化的命令行环境。</li></ul><h2 id="_1-2-安装" tabindex="-1">1.2 安装 <a class="header-anchor" href="#_1-2-安装" aria-label="Permalink to &quot;1.2 安装&quot;">​</a></h2><h3 id="_1-2-1-安装和配置-zsh" tabindex="-1">1.2.1 安装和配置 zsh <a class="header-anchor" href="#_1-2-1-安装和配置-zsh" aria-label="Permalink to &quot;1.2.1 安装和配置 zsh&quot;">​</a></h3><ul><li>确认系统中是否安装有 zsh ：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">zsh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/1.Bl9PaXDa.gif" alt=""></p><ul><li>如果发现没有安装，则需要手动安装：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zsh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/2.Cgv_3dDC.gif" alt=""></p><ul><li>查看默认的 shell 解释器：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $SHELL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/3.CU-ybZDX.gif" alt=""></p><ul><li>使用 <code>chsh</code> 命令更改默认的 shell 解释器为 zsh ：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chsh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">which</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> zsh</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/4.Cn-keABb.gif" alt=""></p><ul><li>退出并重新登录，查看是否设置成功：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ctrl + D</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">exit</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> $SHELL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/5.Csgc1MW1.gif" alt=""></p><h3 id="_1-2-2-安装-oh-my-zsh" tabindex="-1">1.2.2 安装 oh-my-zsh <a class="header-anchor" href="#_1-2-2-安装-oh-my-zsh" aria-label="Permalink to &quot;1.2.2 安装 oh-my-zsh&quot;">​</a></h3><h4 id="_1-2-2-1-自动化安装" tabindex="-1">1.2.2.1 自动化安装 <a class="header-anchor" href="#_1-2-2-1-自动化安装" aria-label="Permalink to &quot;1.2.2.1 自动化安装&quot;">​</a></h4><ul><li>可以使用官方提供的自动化脚本进行安装：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;$(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">curl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -fsSL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>注意⚠️：</p><ul><li>① 可能会出现安装失败；此时，就需要魔法来解决！！！</li><li>② 将 <code>https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh</code> 替换为 <code>https://install.ohmyz.sh</code>，因为某些国家会污染 <code>raw.githubusercontent.com</code>。</li></ul></blockquote><p><img src="/linux/assets/6.D93xv41Y.gif" alt=""></p><h4 id="_1-2-2-2-手动安装" tabindex="-1">1.2.2.2 手动安装 <a class="header-anchor" href="#_1-2-2-2-手动安装" aria-label="Permalink to &quot;1.2.2.2 手动安装&quot;">​</a></h4><ul><li>安装 git ：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/7.ChwhQpg0.gif" alt=""></p><ul><li>下载源码：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/ohmyzsh/ohmyzsh.git</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --depth=1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.oh-my-zsh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/8.BOubEmSR.gif" alt=""></p><ul><li>备份现有的配置文件（可选）：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc.back</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/9.DhEmxAkj.gif" alt=""></p><ul><li>创建 zsh 的配置文件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.oh-my-zsh/templates/zshrc.zsh-template</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/10.DkcdTB4F.gif" alt=""></p><ul><li>加载配置文件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/11.CtOPvV3C.gif" alt=""></p><h3 id="_1-2-3-配置主题" tabindex="-1">1.2.3 配置主题 <a class="header-anchor" href="#_1-2-3-配置主题" aria-label="Permalink to &quot;1.2.3 配置主题&quot;">​</a></h3><ul><li>Oh My Zsh 内置了很多主题，可以通过如下的命令查看：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.oh-my-zsh/themes</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/12.VYMq87dN.gif" alt=""></p><ul><li>通过 vim 编辑 <code>~/.zshrc</code> 配置文件，修改内置主题：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 其余略</span></span>
<span class="line"><span>ZSH_THEME=&quot;agnoster&quot; # 修改，原来是 robbyrussell</span></span>
<span class="line"><span># 其余略</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/linux/assets/13.Dds0gniI.gif" alt=""></p><ul><li>加载 <code>~/.zshrc</code> 配置文件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/14.DtHer1Gy.gif" alt=""></p><h3 id="_1-2-4-安装插件" tabindex="-1">1.2.4 安装插件 <a class="header-anchor" href="#_1-2-4-安装插件" aria-label="Permalink to &quot;1.2.4 安装插件&quot;">​</a></h3><h4 id="_1-2-4-1-概述" tabindex="-1">1.2.4.1 概述 <a class="header-anchor" href="#_1-2-4-1-概述" aria-label="Permalink to &quot;1.2.4.1 概述&quot;">​</a></h4><ul><li>oh-my-zsh 内置了很多插件，可以在 <code>~/.oh-my-zsh/plugins</code>中查看，如：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.oh-my-zsh/plugins</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/15.DOme03zy.gif" alt=""></p><ul><li>但是，有的时候，还需要一些第三方插件，可以在<a href="https://github.com/unixorn/awesome-zsh-plugins" target="_blank" rel="noreferrer">这里</a>查看。</li></ul><h4 id="_1-2-4-2-安装-zsh-completions-额外补全" tabindex="-1">1.2.4.2 安装 zsh-completions（额外补全） <a class="header-anchor" href="#_1-2-4-2-安装-zsh-completions-额外补全" aria-label="Permalink to &quot;1.2.4.2 安装 zsh-completions（额外补全）&quot;">​</a></h4><ul><li>下载并安装：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/zsh-users/zsh-completions</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --depth=1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ${ZSH_CUSTOM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">${ZSH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">~</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.oh-my-zsh}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">custom}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/plugins/zsh-completions</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/16.DPQx4weg.gif" alt=""></p><ul><li>添加到指定目录：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">fpath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">${ZSH_CUSTOM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">${ZSH</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">~</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.oh-my-zsh}</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">custom}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/plugins/zsh-completions/src</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/17.CQTkFO3m.gif" alt=""></p><ul><li>加载配置：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$ZSH</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/oh-my-zsh.sh&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/18.DhQo-rRN.gif" alt=""></p><h4 id="_1-2-4-3-安装-zsh-autosuggestions-命令提示" tabindex="-1">1.2.4.3 安装 zsh-autosuggestions（命令提示） <a class="header-anchor" href="#_1-2-4-3-安装-zsh-autosuggestions-命令提示" aria-label="Permalink to &quot;1.2.4.3 安装 zsh-autosuggestions（命令提示）&quot;">​</a></h4><ul><li>下载并安装：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/zsh-users/zsh-autosuggestions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ${ZSH_CUSTOM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">~</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.oh-my-zsh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">custom}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/plugins/zsh-autosuggestions</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/19.B6U3uhC6.gif" alt=""></p><ul><li>通过 vim 编辑 <code>~/.zshrc</code> 配置文件，添加该插件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 其余略</span></span>
<span class="line"><span>plugins=(</span></span>
<span class="line"><span>    git</span></span>
<span class="line"><span>    # other plugins...</span></span>
<span class="line highlighted"><span>    zsh-autosuggestions</span></span>
<span class="line"><span>)</span></span>
<span class="line"><span># 其余略</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p><img src="/linux/assets/20.mk-DC0Jc.gif" alt=""></p><ul><li>加载 <code>~/.zshrc</code> 配置文件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/21.B9rETW81.gif" alt=""></p><blockquote><p>注意⚠️：通过 <code>→</code> 来补全。</p></blockquote><h4 id="_1-2-4-4-安装-zsh-syntax-highlighting-语法高亮" tabindex="-1">1.2.4.4 安装 zsh-syntax-highlighting（语法高亮） <a class="header-anchor" href="#_1-2-4-4-安装-zsh-syntax-highlighting-语法高亮" aria-label="Permalink to &quot;1.2.4.4 安装 zsh-syntax-highlighting（语法高亮）&quot;">​</a></h4><ul><li>下载并安装：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/zsh-users/zsh-syntax-highlighting.git</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ${ZSH_CUSTOM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">~</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.oh-my-zsh</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">/</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">custom}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/plugins/zsh-syntax-highlighting</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/22.wbdsfzO0.gif" alt=""></p><ul><li>通过 vim 编辑 <code>~/.zshrc</code> 配置文件，添加该插件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span># 其余略</span></span>
<span class="line"><span>plugins=(</span></span>
<span class="line"><span>    git</span></span>
<span class="line"><span>    # other plugins...</span></span>
<span class="line"><span>    zsh-autosuggestions</span></span>
<span class="line highlighted"><span>    zsh-syntax-highlighting</span></span>
<span class="line"><span>)</span></span>
<span class="line"><span># 其余略</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><img src="/linux/assets/23.CQDmbyS5.gif" alt=""></p><ul><li>加载 <code>~/.zshrc</code> 配置文件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/24.BhpDc447.gif" alt=""></p><h3 id="_1-2-5-解决问题" tabindex="-1">1.2.5 解决问题 <a class="header-anchor" href="#_1-2-5-解决问题" aria-label="Permalink to &quot;1.2.5 解决问题&quot;">​</a></h3><h4 id="_1-2-5-1-问题引出" tabindex="-1">1.2.5.1 问题引出 <a class="header-anchor" href="#_1-2-5-1-问题引出" aria-label="Permalink to &quot;1.2.5.1 问题引出&quot;">​</a></h4><ul><li>当我们在使用 <code>tab</code> 进行命令补全的时候，可能会出现下面的情况（出现重复字符）：</li></ul><p><img src="/linux/assets/25.gHkh5xwM.gif" alt=""></p><h4 id="_1-2-5-2-问题解决" tabindex="-1">1.2.5.2 问题解决 <a class="header-anchor" href="#_1-2-5-2-问题解决" aria-label="Permalink to &quot;1.2.5.2 问题解决&quot;">​</a></h4><ul><li>① 安装语言包：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装字体</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> powerline-fonts</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 安装语言包</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dnf</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> glibc-langpack-en</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><img src="/linux/assets/26.Dvor56VQ.gif" alt=""></p><ul><li>② 查看系统 locale ：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">localectl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> list-locales</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/27.CiE54rUT.gif" alt=""></p><ul><li>③ 设置编码：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改编码</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;export LC_CTYPE=en_US.UTF-8&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重新加载配置文件</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/linux/assets/28.8_cXh2bG.gif" alt=""></p><ul><li>④ 修改主题配置：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 修改主题</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/⚡/%{%G⚡%}/&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.oh-my-zsh/themes/agnoster.zsh-theme</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重新加载配置文件</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/linux/assets/29.BNnIZh6i.gif" alt=""></p><h1 id="第二章-rbac-模型" tabindex="-1">第二章：RBAC 模型 <a class="header-anchor" href="#第二章-rbac-模型" aria-label="Permalink to &quot;第二章：RBAC 模型&quot;">​</a></h1><h2 id="_2-1-概述" tabindex="-1">2.1 概述 <a class="header-anchor" href="#_2-1-概述" aria-label="Permalink to &quot;2.1 概述&quot;">​</a></h2><ul><li>RBAC（Role-Based Access Control，基于角色的访问控制）是一种访问控制模型，它通过定义<code>角色</code>来<code>管理用户</code>对<code>系统资源</code>的<code>访问权限</code>。</li><li>在 RBAC 模型中，用户不是直接被授予权限的，而是被分配到一个或多个角色中，每个角色都包含了一组权限。</li><li>这样，<code>用户</code>可以通过<code>角色</code>来<code>间接</code>的<code>获取</code>对资源的<code>访问控制</code>（权限）。</li><li>这种模型的核心思想是将<code>权限管理</code>和<code>用户身份</code>分离，使得<code>权限分配</code>更加<code>灵活</code>和<code>易于管理</code>。</li></ul><blockquote><p>注意⚠️：</p><ul><li><p>① RBAC 模型的应用场景非常广泛，包括但不限于：</p><ul><li>企业资源规划（ERP）系统：在大型企业中，员工可能需要访问不同的业务模块，RBAC 可以确保他们只能访问其职责范围内的数据。</li><li>医疗信息系统：医生、护士、行政人员等不同角色需要访问不同级别的患者信息。</li><li>金融服务：银行和金融机构使用 RBAC 来控制员工对敏感金融数据的访问。</li><li>……</li></ul></li><li><p>② Kubernetes（云原生的事实标准）也是基于 RBAC 模型开发的。</p></li></ul></blockquote><h2 id="_2-2-rbac" tabindex="-1">2.2 RBAC <a class="header-anchor" href="#_2-2-rbac" aria-label="Permalink to &quot;2.2 RBAC&quot;">​</a></h2><ul><li>最简单的 RBAC 模型是 RBAC0，包含了<code>用户</code>、<code>角色</code>和<code>权限</code>之间的关系（多对多的关系），即：</li></ul><p><img src="/linux/assets/1.Cw-GxSct.png" alt="image-20240214082321451"></p><blockquote><p>注意⚠️：</p><ul><li>① 用户、角色、权限都是<code>多对多</code>的关系，是最通用的权限管理模型，节省了很大的权限维护成本，对于 Linux 而言是足够的；所以，目前为止，Linux 的权限模型就是 RBAC0 模型。</li><li>② 其实，在 RBAC 模型出现之前，还有 ACL 模型，即：用户和权限的多对多关系；但是随着用户数量的增长，这种模型的弊端就凸显出来了，每一个用户都需要去分配权限，非常的浪费管理员的时间和精力，并且用户和权限杂乱的对应关系会给后期带来巨大的维护成本。</li><li>③ RBAC96 模型族确实是由 George Mason 大学的 Ravi Sandhu 教授在 1996 年提出的，这个模型族对基于角色的访问控制（RBAC）进行了系统的分类和扩展。RBAC96 模型族包括四个主要模型：RBAC0、RBAC1、RBAC2 和 RBAC3，它们各自代表了 RBAC 的不同层次和复杂度。</li></ul></blockquote><h2 id="_2-3-linux-的安全模型-3a-认证" tabindex="-1">2.3 Linux 的安全模型（3A 认证） <a class="header-anchor" href="#_2-3-linux-的安全模型-3a-认证" aria-label="Permalink to &quot;2.3 Linux 的安全模型（3A 认证）&quot;">​</a></h2><ul><li><p>在信息安全领域，3A 认证通常指的是<code>认证（Authentication）</code>、<code>授权（Authorization）</code>、和<code>审计（Accounting）</code>，这三个概念是确保系统安全的基础。在 Linux 系统中，这些功能通过各种机制和工具实现，确保了系统的安全性和可控性，其中：</p><ul><li><strong>认证（Authentication）</strong>： <ul><li>认证是指<code>验证</code>用户或系统的<code>身份</code>。在 Linux 中，用户通常需要通过用户名和密码进行认证。此外，Linux 也支持更复杂的认证机制，如：公钥基础设施（PKI）、Kerberos 认证、以及双因素认证等。</li></ul><ul><li>PAM（Pluggable Authentication Modules）框架允许管理员配置和整合不同的认证方法，使得系统可以灵活地支持多种认证技术。</li></ul></li><li><strong>授权（Authorization）</strong>： <ul><li>授权过程决定了<code>已认证的用户可以访问哪些资源</code>，以及<code>他们可以进行哪些操作</code>。Linux 使用权限位（读、写、执行）、访问控制列表（ACLs）以及基于角色的访问控制（RBAC）等机制来管理授权。</li><li>更高级的安全模块，如：SELinux 和 AppArmor，提供了基于策略的授权控制。这些工具可以定义非常细粒度的策略，控制应用程序和用户对文件、进程和系统调用的访问。</li></ul></li><li><strong>审计（Accounting）</strong>： <ul><li>审计是指<code>记录和分析用户的行为和系统事件</code>，是安全管理中的关键部分。Linux 提供了 Auditd 这样的工具，可以详细记录并审计系统发生的各种事件。</li><li>审计记录可以帮助系统管理员追踪用户活动，发现异常行为，进行问题诊断，以及满足合规性需求。</li></ul></li></ul></li><li><p>其对应的流程，如下所示：</p><ul><li>① <strong>用户发起请求</strong>：用户通过客户端发起登录请求，输入用户名和密码。</li><li>② <strong>认证服务器接收请求</strong>：系统中的认证服务器接收到请求，并验证用户输入的用户名和密码。</li><li>③ <strong>验证身份</strong>：认证服务器检查提供的凭据是否与数据库中的记录匹配。</li><li>④ <strong>生成令牌</strong>：如果身份验证成功，认证服务器会生成一个安全令牌，并将其发回给用户。</li><li>⑤ <strong>访问资源</strong>：用户使用接收到的令牌请求访问特定资源。</li><li>⑥ <strong>授权服务器验证令牌</strong>：授权服务器接收到资源访问请求，并验证令牌的有效性。</li><li>⑦ <strong>授权访问</strong>：如果令牌有效，授权服务器会根据用户的权限决定是否允许访问请求的资源。</li><li>⑧ <strong>记录审计日志</strong>：无论访问是允许还是拒绝，系统都会在审计日志中记录事件，包括用户身份、请求的资源和时间等信息。</li><li>⑨ <strong>响应用户</strong>：系统向用户返回访问资源的结果，无论是成功还是失败的消息。</li></ul></li></ul><blockquote><p>注意⚠️：在 AlmaLinux 中的审计日志是 <code>/var/log/seucre</code>，不同版本 Linux 的审计日志可能不一样。</p></blockquote><ul><li>总而言之，通过这三大核心功能，Linux 系统能够提供强大的安全保障，同时为系统管理员提供灵活的管理选项以适应不同的操作和安全需求。在设计和实施安全策略时，合理配置和使用这三大功能是非常关键的。</li></ul><h1 id="第三章-用户管理概述" tabindex="-1">第三章：用户管理概述 <a class="header-anchor" href="#第三章-用户管理概述" aria-label="Permalink to &quot;第三章：用户管理概述&quot;">​</a></h1><h2 id="_3-1-概述" tabindex="-1">3.1 概述 <a class="header-anchor" href="#_3-1-概述" aria-label="Permalink to &quot;3.1 概述&quot;">​</a></h2><ul><li>在各种操作系统中都有<code>用户</code>的概念，如：win 中的超级管理员（administrator）和普通用户；当然，Linux 中也有各种类型的用户。</li><li>很多时候，我们在进行系统管理的时候，会使用到 root 用户；但是，为了系统的安全，还是推荐使用普通用户。</li></ul><blockquote><p>注意⚠️：</p><ul><li>① Linux 中有各种各样的用户，每个用户都有自己的作用，如：root 用户（最高权限的用户）、普通用户、虚拟用户（一些服务的创建、启动、停止，需要此类用户）。</li><li>② Linux 是一个多用户、多任务的操作系统，这意味着它可以同时支持多个用户登录并执行任务。在 Linux 系统中，每个用户都有自己的用户账户，可以拥有不同的权限和资源访问级别。</li><li>③ Linux 中系统管理员可以为不同的用户分配不同的权限，以确保系统的安全性和资源的有效管理。这种多用户环境使得 Linux 成为服务器和工作站的理想选择，因为它能够高效地处理并发任务和用户需求。</li></ul></blockquote><h2 id="_3-2-uid-和-gid" tabindex="-1">3.2 UID 和 GID <a class="header-anchor" href="#_3-2-uid-和-gid" aria-label="Permalink to &quot;3.2 UID 和 GID&quot;">​</a></h2><ul><li>在生活中，如何精确标识一个人？答案是通过<code>身份证</code>，或者身份证上的号码（<code>身份证号</code>），即：</li></ul><p><img src="/linux/assets/31.D_R8VJ9n.png" alt=""></p><ul><li>其实，对于中国来说，还有户籍制度，它是中国特有的一种户籍管理方式，记录了公民的个人信息，包括：姓名、性别、出生日期、民族、婚姻状况、家庭关系以及居住地址等，对应的载体就是<code>户口本</code>，而且<code>户口本</code>上也有唯一的<code>号码</code>的（<code>户号</code>），即：</li></ul><p><img src="/linux/assets/32.D9vFbzNk.png" alt=""></p><ul><li>对于 Linux 而言，Linux 通过 <code>UID</code> （User ID）来<code>标识</code>一个<code>用户</code>，通过 <code>GID</code>（Group ID）来标识一个<code>用户组</code>，即：</li></ul><table><thead><tr><th>类别</th><th>说明</th><th>备注</th></tr></thead><tbody><tr><td><code>UID</code> （User ID</td><td>用户的 ID 号</td><td>类似于身份证号码，即：身份证号</td></tr><tr><td><code>GID</code>（Group ID）</td><td>用户组的 ID 号</td><td>类似于户口本上的号码，即：户号</td></tr></tbody></table><ul><li>通过如下的命令，查询当前登录用户的 UID 和 GID ，即：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/33.BIO-qQH6.png" alt=""></p><h2 id="_3-3-用户分类" tabindex="-1">3.3 用户分类 <a class="header-anchor" href="#_3-3-用户分类" aria-label="Permalink to &quot;3.3 用户分类&quot;">​</a></h2><ul><li>可以根据 <code>uid</code> 来对用户进行分类：</li></ul><table><thead><tr><th>用户分类</th><th>分类方法（uid）</th></tr></thead><tbody><tr><td>root</td><td>uid 是 0 。</td></tr><tr><td>普通用户</td><td>uid &gt;= 1000，手动创建，无法对系统进行更改，只能对家目录进行操作。</td></tr><tr><td>虚拟用户（系统用户）</td><td>uid &lt; 1000 ，用于服务、进程运行使用，如：mysqld 服务、sshd 服务。</td></tr></tbody></table><blockquote><p>注意⚠️：</p><ul><li>① 在 Linux 中，对用户分类的方法<code>并不仅仅</code>通过 uid 这种分类方法，也可以通过其它<code>分类方法</code>来进行分类。</li><li>② 用户的 id （特指普通用户），即 uid 在 [1000,60000] 之间，不要超过此范围，可以通过查看 <code>/etc/login.defs</code> 文件来了解。</li></ul></blockquote><h2 id="_3-4-用户相关的文件-⭐" tabindex="-1">3.4 用户相关的文件（⭐） <a class="header-anchor" href="#_3-4-用户相关的文件-⭐" aria-label="Permalink to &quot;3.4 用户相关的文件（⭐）&quot;">​</a></h2><ul><li>Linux 中每创建一个用户，通常都会影响下面的文件：</li></ul><table><thead><tr><th>用户相关文件</th><th>说明</th></tr></thead><tbody><tr><td><code>/etc/passwd</code>（⭐）</td><td>存放用户信息。</td></tr><tr><td>/etc/shadow</td><td>存放密码信息。</td></tr><tr><td>/etc/group</td><td>存放用户组信息。</td></tr><tr><td>/etc/gshaow</td><td>存放用户组密码信息；但是，通常不会给用户组设置密码。</td></tr></tbody></table><blockquote><p>注意⚠️：</p><ul><li>① <code>/etc/passwd</code> 文件的名称来源于 Unix 和类 Unix 系统的早期历史，最初是存储用户信息和密码信息的；但是，随着时间的推移，为了限制对密码信息的访问，将密码信息移动到了 <code>/etc/shadow</code>文件，并且只能管理员（root）才能访问；当然，<code>/etc/passwd</code> 文件依然保留下来，只存储用户的基本信息，如：用户名、UID 等。</li><li>② shadow 在英文中是<code>阴影</code>，<code>影子</code>的意思；在 Linux 中，用来表示只能由 root 才能访问。</li></ul></blockquote><ul><li>查询 <code>/etc/passwd</code> 文件（⭐）：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/passwd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/34.Dji4dLWh.png" alt=""></p><ul><li>详细解释 <code>/etc/passwd</code> 中每一列的含义（⭐）：</li></ul><p><img src="/linux/assets/35.Hs0GybGy.png" alt="image-20240214100834258"></p><blockquote><p>注意⚠️：</p><ul><li>① 可以使用 <code>vipw</code>命令来修改 <code>/etc/passwd</code> 文件，以防止误操作；但是，通常不建议手动修改 <code>/etc/passwd</code> 文件。</li><li>② 可以使用 <code>pwck</code> 命令来校验 <code>/etc/passwd</code> 文件格式是否正确。</li></ul></blockquote><ul><li>查询 <code>/etc/shadow</code> 文件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/shadow</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/36.B7nCSr0k.png" alt=""></p><ul><li>详细解释 <code>/etc/shadow</code> 中每一列的含义：</li></ul><p><img src="/linux/assets/37.D0gQzqIY.png" alt=""></p><blockquote><p>注意⚠️： 对于密码的策略，如：最后一次密码修改时间、最小密码修改间隔，最长密码有效期等等，可以使用 <code>chage 用户名</code> 命令来修改，以防止误操作！！！</p></blockquote><ul><li>查询 <code>/etc/group</code> 文件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/group</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/38.BPB-8DJa.png" alt=""></p><ul><li>详细解释 <code>/etc/group</code> 中每一列的含义：</li></ul><p><img src="/linux/assets/39.Bto3FBRc.png" alt=""></p><blockquote><p>注意⚠️：</p><ul><li>① 可以使用 <code>vigr</code>命令来修改 <code>/etc/group</code> 文件，以防止误操作；但是，通常不建议手动修改 <code>/etc/group</code> 文件。</li><li>② 可以使用 <code>grpck</code> 命令来校验 <code>/etc/group</code> 文件格式是否正确。</li></ul></blockquote><h2 id="_3-5-用户和组的关系" tabindex="-1">3.5 用户和组的关系 <a class="header-anchor" href="#_3-5-用户和组的关系" aria-label="Permalink to &quot;3.5 用户和组的关系&quot;">​</a></h2><ul><li><p>RBAC 模型中的用户和角色之间的关系是多对多，在 Linux 中，角色和用户组的概念是等价的，即：用户和用户组之间的关系也是多对多的，所以：</p><ul><li>一个用户可以有多个用户组；但是，至少有 1 个用户组。</li><li>一个用户组可以有多个用户；但是，可以有 0 个用户。</li><li>用户的主要组（primary group，私有组），即一个用户必须属于且只有一个主组。创建用户的时候，默认会创建一个同名的用户组作为主组。</li><li>用户的附加组（supplementary group，辅助组），即一个用户可以属于 0 或多个附加组。</li><li>使用组的时候，可以对用户进行批量管理，如：对一个用户组授权，那么该组下的所有用户都将继承这个组的权限。</li></ul></li><li><p>示例：</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@AlmaLinux9 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# id root</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># gid 表示主组，而 groups 表示组列表，包括：附加组</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) gid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) groups</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">root</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@AlmaLinux9 </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# id x</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># gid 表示主组，而 groups 表示组列表，包括：附加组，wheel 就是附加组</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">uid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) gid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) groups</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">x</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">,10</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wheel）</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="_3-6-安全上下文" tabindex="-1">3.6 安全上下文 <a class="header-anchor" href="#_3-6-安全上下文" aria-label="Permalink to &quot;3.6 安全上下文&quot;">​</a></h2><h3 id="_3-6-1-程序和进程的关系" tabindex="-1">3.6.1 程序和进程的关系 <a class="header-anchor" href="#_3-6-1-程序和进程的关系" aria-label="Permalink to &quot;3.6.1 程序和进程的关系&quot;">​</a></h3><ul><li>程序 VS 进程：</li></ul><table><thead><tr><th>类别</th><th>程序 (Program)</th><th>进程 (Process)</th></tr></thead><tbody><tr><td>定义</td><td>一组静态的指令和数据的集合，存储在存储设备（如硬盘）上，通常是<code>可执行的二进制文件</code>或<code>命令</code>。</td><td>程序的动态执行实例，由操作系统管理。</td></tr><tr><td>存储</td><td>存储在磁盘或其他非易失性存储设备上。</td><td>在内存中执行，并使用系统资源，如：CPU和内存。</td></tr><tr><td>实例</td><td>静态，不执行任何操作。</td><td>活跃的，执行指令和操作。</td></tr><tr><td>资源使用</td><td>不使用系统资源，除非被加载成进程。</td><td>使用 CPU 时间、内存、I/O 等资源。</td></tr><tr><td>多重性</td><td>一个程序可以同时有多个执行实例。</td><td>每个实例都是一个独立的进程，可能与其他进程并行执行。</td></tr><tr><td>生命周期</td><td>不变，除非被修改或删除。</td><td>开始、执行、等待（可选）、结束。</td></tr><tr><td>管理</td><td>由用户或开发者管理。</td><td>由操作系统通过调度程序管理。</td></tr></tbody></table><ul><li>程序和进程之间的关系： <ul><li>当程序被操作系统加载到内存中时，它变成一个进程。因此，进程可以被看作是程序的活跃版本。</li><li>一个程序可以有多个同时运行的实例，每个实例对应一个进程，例如：我们可以多次打开同一个文本编辑器，每次打开都会创建一个新的进程，尽管它们都是同一个程序的实例。</li></ul></li></ul><blockquote><p>注意⚠️：</p><ul><li>① 不是所有的文件都是程序，只有哪些<code>可以执行</code>的<code>二进制文件</code>或<code>命令</code>才可以称为<code>程序</code>。</li><li>② 程序和进程虽然紧密相关，但它们在操作系统中的角色和功能是有区别的。</li><li>③ 程序定义了要执行的操作，而进程是这些操作的实际执行。</li></ul></blockquote><h3 id="_3-6-2-安全上下文-context" tabindex="-1">3.6.2 安全上下文 Context <a class="header-anchor" href="#_3-6-2-安全上下文-context" aria-label="Permalink to &quot;3.6.2 安全上下文 Context&quot;">​</a></h3><ul><li>在 Linux 中，运行中的程序（进程）都是以进程发起者（用户）的身份运行，进程所能够访问的资源权限取决于进程的发起者的身份（和进程本身的程序文件无关），如：某个进程需要读写某个文件，需要看该进程的发起者有没有权限读取该文件。</li></ul><blockquote><p>注意⚠️：</p><ul><li>① 一个程序可不可以执行，取决于进程的发起者，即：reboot 是可执行文件（命令），它的权限是 <code>lrwxrwxrwx. 1 root root 16 Sep 27 2023 /usr/sbin/reboot -&gt; ../bin/systemctl</code> 只能由 root 执行，普通用户是没有权限执行该命令。</li><li>② 一个进程可不可以访问某些资源，取决于进程的发起者（和进程本身的程序文件无关），即：cat 是可执行文件（命令），它的权限是 <code>-rwxr-xr-x. 1 root root 36320 Apr 7 2023 /usr/bin/cat</code> 即 root 是可读可写可执行，普通用户是可读可执行；但是，对于 <code>/etc/shadow</code> 文件来说，它的权限是 <code>---------- 1 root root 1470 Apr 11 13:16 /etc/shadow</code>，即普通用户没有任何权限，所以普通用户使用 cat 命令查询该文件会报错（root 之所以可以，因为它是超级管理员）。</li></ul></blockquote><ul><li>示例：root 可以访问 /etc/shadow</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/shadow</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/40.b-qD_xt4.png" alt="image-20240414115143600"></p><ul><li>示例：普通用户不可以访问 /etc/shadow</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/shadow</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 报错，cat: /etc/shadow: Permission denied</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/41.CADFMbTB.png" alt="image-20240414115238167"></p><h1 id="第四章-用户管理命令-⭐" tabindex="-1">第四章：用户管理命令（⭐） <a class="header-anchor" href="#第四章-用户管理命令-⭐" aria-label="Permalink to &quot;第四章：用户管理命令（⭐）&quot;">​</a></h1><h2 id="_4-1-概述" tabindex="-1">4.1 概述 <a class="header-anchor" href="#_4-1-概述" aria-label="Permalink to &quot;4.1 概述&quot;">​</a></h2><ul><li>用户管理命令，无非就是对用户进行<code>增</code>、<code>删</code>、<code>改</code>、<code>查</code>操作。</li></ul><h2 id="_4-2-增加" tabindex="-1">4.2 增加 <a class="header-anchor" href="#_4-2-增加" aria-label="Permalink to &quot;4.2 增加&quot;">​</a></h2><h3 id="_4-2-1-概述" tabindex="-1">4.2.1 概述 <a class="header-anchor" href="#_4-2-1-概述" aria-label="Permalink to &quot;4.2.1 概述&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-u][-s][-M][-g][-r] 用户名</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>功能：创建用户。</li><li>选项： <ul><li><code>-u</code>，<code>--uid UID</code>：指定用户的 ID，即 UID 。</li><li><code>-s</code>，<code>--shell SHEL</code>：指定命令解释器，默认是 <code>/bin/bash</code>。</li><li><code>-M</code>，<code>--no-create-home</code>：不创建用户的家目录。</li><li><code>-g</code>，<code>--gid GROUP</code>：指定用户组名称或用户组 ID。</li><li><code>-r</code>，<code>--system</code>：创建系统用户，即 UID &lt; 1000 。</li></ul></li></ul><blockquote><p>注意⚠️：</p><ul><li>① 默认情况下，会创建<code>同名</code>的<code>家目录</code>和<code>用户组</code>。</li><li>② 在实际工作中，像 <code>MySQL</code> 、<code>NGINX</code> 之类的软件，都是作为<code>服务</code>出现的，通常是使用这样的命令：<code>useradd -s /sbin/nologin -M -r mysql</code> 来创建虚拟账户。</li></ul></blockquote><ul><li>示例：创建普通用户</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/42.zTIq3BC1.gif" alt=""></p><ul><li>示例：创建虚拟账户 mysql ，并指定 UID 为 1314</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -u</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1314</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /sbin/nologin</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -M</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/43.DYr1_Vhg.gif" alt=""></p><h3 id="_4-2-2-useradd-命令的默认选项" tabindex="-1">4.2.2 useradd 命令的默认选项 <a class="header-anchor" href="#_4-2-2-useradd-命令的默认选项" aria-label="Permalink to &quot;4.2.2 useradd 命令的默认选项&quot;">​</a></h3><ul><li>useradd 命令的默认选项（不加任何参数的默认行为）是通过 <code>/etc/default/useradd</code>定义的，即：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/default/useradd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/44.D0r2v0H0.png" alt=""></p><ul><li>其内容如下：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># useradd defaults file</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">GROUP</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">100</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # useradd 不指定组，且 /etc/login.defs 中的 USERGROUPS_ENAB yes 或 useradd -N 的时候，group 为 100</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HOME</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/home</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 默认的用户家目录是 /home</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">INACTIVE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 对应 /etc/shadow 文件第 7 列，即用户密码过期后的账号锁定的宽限期，-1 表示不锁定</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">EXPIRE</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 对应 /etc/shadow 文件第 8 列，即用户账号的有效期</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SHELL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/bin/bash</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 默认的 SHELL</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">SKEL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/etc/skel</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 用于生成新用户家目录的模板文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">CREATE_MAIL_SPOOL</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">yes</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 默认创建收件箱</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>也可以通过如下的命令查看 useradd 命令的默认选项，即：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/45.uIOnf5aQ.png" alt=""></p><ul><li>除了手动修改 <code>/etc/default/useradd</code> 文件来改变 useradd 命令的默认选项之外，还可以通过如下的命令来更改 useradd 命令的默认设置：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SHELL</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 更改默认的 SHELL</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/46.B-QDSUua.png" alt=""></p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -D</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> BASH_DIR</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 更改家目录</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/47.BIneMmaZ.png" alt=""></p><blockquote><p>注意⚠️：</p><ul><li>① 通常情况下，不需要修改 useradd 命令的默认选项。</li><li>② 新建用户相关的文件，如下所示： <ul><li><code>/etc/default/useradd</code>：<code>useradd</code>命令创建新用户时应用的默认设置。</li><li><code>/etc/skel/*</code> ：<code>/etc/skel/</code>目录包含了当使用<code>useradd</code>命令创建一个新用户并指定创建家目录时，应该复制到新用户家目录中的文件和目录，通常的配置文件有 <code>.bashrc</code>、<code>.bash_profile</code>、<code>bash_logout</code>等。</li><li><code>/etc/login.defs</code>：为用户登录相关的多种行为提供了系统级的配置，如：密码过期策略、密码复杂度和账户锁定策略等。</li></ul></li></ul></blockquote><h2 id="_4-3-删除" tabindex="-1">4.3 删除 <a class="header-anchor" href="#_4-3-删除" aria-label="Permalink to &quot;4.3 删除&quot;">​</a></h2><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userdel</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-r] 用户名</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>功能：删除用户。</li><li>选项： <ul><li><code>-r</code>， <code>--remove</code>：删除用户和家目录。</li></ul></li></ul><blockquote><p>注意⚠️：</p><ul><li>① 默认情况下，不会删除用户的家目录，除非添加 <code>-r</code> 选项。</li><li>② 在实际工作中，<code>userdel</code> 命令很危险，建议在 <code>/etc/passwd</code> 文件对应的<code>用户前</code>添加 <code>#</code> 注释，以便达到删除用户的效果。</li></ul></blockquote><ul><li>示例：删除用户</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userdel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/48.C43hOQdO.gif" alt=""></p><ul><li>示例：删除用户和家目录</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">userdel</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/49.CSi4Jh_I.gif" alt=""></p><h2 id="_4-4-修改" tabindex="-1">4.4 修改 <a class="header-anchor" href="#_4-4-修改" aria-label="Permalink to &quot;4.4 修改&quot;">​</a></h2><h3 id="_4-4-1-修改用户信息" tabindex="-1">4.4.1 修改用户信息 <a class="header-anchor" href="#_4-4-1-修改用户信息" aria-label="Permalink to &quot;4.4.1 修改用户信息&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">usermod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-u][-s][-g][-l] 用户名</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>功能：修改用户信息。</p></li><li><p>对应英文：user modify 。</p></li><li><p>选项：</p><ul><li><code>-u</code>，<code>--uid UID</code>：指定用户的 ID，即 UID 。</li><li><code>-s</code>，<code>--shell SHEL</code>：指定命令解释器，默认是 <code>/bin/bash</code>。</li><li><code>-g</code>，<code>--gid GROUP</code>：指定用户组名称或用户组 ID。</li><li><code>-l</code>，<code>--login NEW_LOGIN</code>：修改用户名称，不会修改用户的家目录名称。</li></ul></li><li><p>示例：修改 mysql 的 SHELL 解释器为 /bin/bash</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">usermod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /bin/bash</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mysql</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/50.CsV4l_NN.gif" alt=""></p><ul><li>示例：修改用户名</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">usermod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xudaxian</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/51.CbrL8Gik.gif" alt=""></p><h3 id="_4-4-2-修改密码" tabindex="-1">4.4.2 修改密码 <a class="header-anchor" href="#_4-4-2-修改密码" aria-label="Permalink to &quot;4.4.2 修改密码&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">passwd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [--stdin] [用户名]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>功能：修改用户的密码。</li><li>对应英文：password 。</li><li>选项： <ul><li><code>--stdin</code>：从标准流中读取信息，并修改密码（只有 root 用户才能进行此操作）。</li></ul></li></ul><blockquote><p>注意⚠️：</p><ul><li>① 如果不写用户名，就是修改当前的用户名。</li><li>② <code>--stdin</code> 可以实现批量修改密码，如：<code>echo &#39;123456&#39; | passwd --stdin x</code>。</li></ul></blockquote><ul><li>示例：修改当前用户的密码</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">passwd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/52.CQuMFrv5.gif" alt=""></p><ul><li>示例：修改指定用户的密码</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;123456&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> passwd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --stdin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/53.DE94e2Lz.gif" alt=""></p><h3 id="_4-4-3-切换用户" tabindex="-1">4.4.3 切换用户 <a class="header-anchor" href="#_4-4-3-切换用户" aria-label="Permalink to &quot;4.4.3 切换用户&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">su</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [用户名]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>对应的英文：switch user。</li><li>选项： <ul><li><code>-</code>， <code>-l</code>， <code>--login</code>：切换用户的同时，切换用户的配置和环境变量。</li></ul></li></ul><blockquote><p>注意⚠️：</p><ul><li>① su 命令允许我们在不注销当前会话的情况下，以不同的用户身份之间，执行各种任务，同时保持系统的稳定和安全。</li><li>② root 切换到普通用户，<code>无需</code>登录（输入密码）；普通用户切换到 root ，<code>需要</code>登录（输入密码）。</li></ul></blockquote><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">su</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/54.V79nuyvd.gif" alt=""></p><h2 id="_4-5-查询" tabindex="-1">4.5 查询 <a class="header-anchor" href="#_4-5-查询" aria-label="Permalink to &quot;4.5 查询&quot;">​</a></h2><h3 id="_4-5-1-查询用户的信息" tabindex="-1">4.5.1 查询用户的信息 <a class="header-anchor" href="#_4-5-1-查询用户的信息" aria-label="Permalink to &quot;4.5.1 查询用户的信息&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [用户名]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>功能：</p><ul><li>查询用户的 UID、GID 和用户组信息，进而可以用来检查用户是否存在。</li><li>如果<code>用户名</code>没有指定，默认查询的是当前用户的信息。</li></ul></li><li><p>示例：查询当前用户的信息</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/55.DgVLpzUK.gif" alt=""></p><ul><li>示例：查询指定用户的信息</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/56.Wwt5gL7l.gif" alt=""></p><ul><li>示例：检查指定用户是否存在</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">id</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/57.BcuSZ2M7.gif" alt=""></p><h3 id="_4-5-2-查询用户当前的名字" tabindex="-1">4.5.2 查询用户当前的名字 <a class="header-anchor" href="#_4-5-2-查询用户当前的名字" aria-label="Permalink to &quot;4.5.2 查询用户当前的名字&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">whoami</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li><p>功能：查询用户当前的名字。</p></li><li><p>示例：</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">whoami</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/58.B-bEZhHz.gif" alt=""></p><h3 id="_4-5-3-查询当前登录用户的详细信息" tabindex="-1">4.5.3 查询当前登录用户的详细信息 <a class="header-anchor" href="#_4-5-3-查询当前登录用户的详细信息" aria-label="Permalink to &quot;4.5.3 查询当前登录用户的详细信息&quot;">​</a></h3><h4 id="_4-5-3-1-概述" tabindex="-1">4.5.3.1 概述 <a class="header-anchor" href="#_4-5-3-1-概述" aria-label="Permalink to &quot;4.5.3.1 概述&quot;">​</a></h4><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [-f]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>功能：查询当前登录用户的详细信息，包括：用户名称、终端类型、登录时间、空闲时间、CPU 使用情况以及用户正在执行的进程。</li><li>选项： <ul><li><code>-f</code>，<code>--from</code>：显示远程登录主机的 IP 地址。</li></ul></li></ul><blockquote><p>注意⚠️：w 命令其实是 uptime（计算机正常运行时间，即在线时间） 和 who 命令的组合。</p></blockquote><h4 id="_4-5-3-2-案例" tabindex="-1">4.5.3.2 案例 <a class="header-anchor" href="#_4-5-3-2-案例" aria-label="Permalink to &quot;4.5.3.2 案例&quot;">​</a></h4><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">w</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -f</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/59.BMT8veuS.gif" alt=""></p><h4 id="_4-5-3-3-详细解释" tabindex="-1">4.5.3.3 详细解释 <a class="header-anchor" href="#_4-5-3-3-详细解释" aria-label="Permalink to &quot;4.5.3.3 详细解释&quot;">​</a></h4><ul><li>下面将给出对应的详细信息的解释，即：</li></ul><p><img src="/linux/assets/60.4VdcVbDz.png" alt="image-20240214201619368"></p><h3 id="_4-5-4-显示用户最近的登录信息" tabindex="-1">4.5.4 显示用户最近的登录信息 <a class="header-anchor" href="#_4-5-4-显示用户最近的登录信息" aria-label="Permalink to &quot;4.5.4 显示用户最近的登录信息&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">last</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">last</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/61.CUkoCSJP.gif" alt=""></p><h3 id="_4-5-5-显示用户最近一次的登录信息" tabindex="-1">4.5.5 显示用户最近一次的登录信息 <a class="header-anchor" href="#_4-5-5-显示用户最近一次的登录信息" aria-label="Permalink to &quot;4.5.5 显示用户最近一次的登录信息&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lastlog</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">lastlog</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/62.CVmg888b.gif" alt=""></p><h2 id="_4-6-用户组命令-了解" tabindex="-1">4.6 用户组命令（了解） <a class="header-anchor" href="#_4-6-用户组命令-了解" aria-label="Permalink to &quot;4.6 用户组命令（了解）&quot;">​</a></h2><h3 id="_4-6-1-创建用户组" tabindex="-1">4.6.1 创建用户组 <a class="header-anchor" href="#_4-6-1-创建用户组" aria-label="Permalink to &quot;4.6.1 创建用户组&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groupadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用户组</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groupadd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/63.SBXcyEEo.gif" alt=""></p><h3 id="_4-6-2-创建用户的同时指定用户组" tabindex="-1">4.6.2 创建用户的同时指定用户组 <a class="header-anchor" href="#_4-6-2-创建用户的同时指定用户组" aria-label="Permalink to &quot;4.6.2 创建用户的同时指定用户组&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用户组</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用户名</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>注意⚠️：前提条件是用户组存在！！！</p></blockquote><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">useradd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> x</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/64.Bi9oC20_.gif" alt=""></p><h3 id="_4-6-3-删除用户组" tabindex="-1">4.6.3 删除用户组 <a class="header-anchor" href="#_4-6-3-删除用户组" aria-label="Permalink to &quot;4.6.3 删除用户组&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groupdel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用户组</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>注意⚠️：</p><ul><li>① 需要确保用户组中没有用户；否则，将会报错！！！</li><li>② 可以通过 <code>getent group 用户组</code>命令查询用户组的详细信息，包括：用户组密码、GID 以及用户组成员列表。</li></ul></blockquote><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">groupdel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dev</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/65.CyCZLsuI.gif" alt=""></p><h1 id="第五章-sudo-权限管理-⭐" tabindex="-1">第五章：sudo 权限管理（⭐） <a class="header-anchor" href="#第五章-sudo-权限管理-⭐" aria-label="Permalink to &quot;第五章：sudo 权限管理（⭐）&quot;">​</a></h1><h2 id="_5-1-概述" tabindex="-1">5.1 概述 <a class="header-anchor" href="#_5-1-概述" aria-label="Permalink to &quot;5.1 概述&quot;">​</a></h2><ul><li>在实际工作中，开发人员要查看系统日志，怎么办（root 权限太大，普通用户的权限又太小）？</li></ul><p><img src="/linux/assets/66.B5EUsvZm.gif" alt=""></p><ul><li>此时，就可以使用 sudo 进行提权，对应的流行如下：</li></ul><p><img src="/linux/assets/67.BXvaO9kI.png" alt="image-20240214212206333"></p><blockquote><p>注意⚠️：未来会搭建<code>日志平台（ELK、EFK 等）</code>，那么就不需要这么麻烦了。</p></blockquote><h2 id="_5-2-sudo-授权和使用" tabindex="-1">5.2 sudo 授权和使用 <a class="header-anchor" href="#_5-2-sudo-授权和使用" aria-label="Permalink to &quot;5.2 sudo 授权和使用&quot;">​</a></h2><ul><li><p>sudo 授权和使用步骤如下：</p><ul><li>① 使用 <code>visudo</code> 命令进行授权（其实，背后修改的是 <code>/etc/sudoers</code> 文件）。</li><li>② 普通用户通过 <code>sudo cat xxx</code> 等进行日志文件的查看，并且可以通过 <code>sudo -l</code> 查看哪些命令需要使用 sudo 提权。</li></ul></li><li><p>通过 which 查询这些命令对应的绝对路径，即：</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">which</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> head</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tail</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> less</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> more</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> grep</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/68.Dqk3NmHx.png" alt="image-20240214212650270"></p><ul><li>root 用户使用 <code>visudo</code> 命令进行授权（授权给开发人员），即：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">visudo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>root    ALL=(ALL)       ALL # 100 行</span></span>
<span class="line"><span>x       ALL=(ALL)       /usr/bin/cat, /usr/bin/head, /usr/bin/tail, /usr/bin/less, /usr/bin/more, /usr/bin/grep</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>解释：</p><ul><li><code>root</code> 表示用户名，具有 root 权限的用户。</li><li><code>ALL=(ALL)</code> 中的 <code>ALL</code> 表示所有主机（即任何 IP 地址），而 <code>(ALL)</code> 表示所有用户组，即 root 用户所属的所有用户组。</li><li><code>ALL</code>：表示所有命令，它允许 root 用户在任何主机上以任何用户组的身份执行任何命令。</li></ul></blockquote><p><img src="/linux/assets/69.DUwOZbxz.gif" alt=""></p><ul><li>普通用户（开发人员）通过 sudo 进行命令的提权，即：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第一次会有密码提示输入，原理是通过时间戳文件文件实现的，可以通过 sudo -k 清除时间戳文件</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /var/log/secure</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/linux/assets/70.DJqAYNUT.gif" alt=""></p><ul><li>有的时候，我们不希望通过 root 账号来管理 Linux ，而希望通过一个账号来管理 Linux ，那么就通过 visudo 命令授权（授权给运维人员），并且不希望输入密码，即：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">visudo</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>root    ALL=(ALL)       ALL # 100 行</span></span>
<span class="line"><span>x       ALL=(ALL)       /usr/bin/cat, /usr/bin/head, /usr/bin/tail, /usr/bin/less, /usr/bin/more, /usr/bin/grep</span></span>
<span class="line"><span>w       ALL=(ALL)       NOPASSWD: ALL # 授权给运维自己不需要密码运行各种命令</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><img src="/linux/assets/71.HuiyzaTo.gif" alt=""></p><h2 id="_5-3-总结" tabindex="-1">5.3 总结 <a class="header-anchor" href="#_5-3-总结" aria-label="Permalink to &quot;5.3 总结&quot;">​</a></h2><ul><li>sodo 就是让普通用户可以拥有 root 的部分权限来操作 Linux。</li><li>流程就是：root 账号使用 <code>visudo</code> 进行授权，普通用户使用 <code>sudo xxx</code> 来进行提权。</li></ul><blockquote><p>注意⚠️：</p><ul><li>① 如果每个用户都需要这么配置，就会感觉非常麻烦，我们也可以使用<code>堡垒机</code>来进行解决这类问题。</li><li>② 一些开源的<code>堡垒机</code>可能没有对用户提权的功能；但是，云厂商提供的<code>堡垒机</code>是有对 SSH、Telnet 协议主机增加提权功能的，只不过需要购买而已！！！</li></ul></blockquote><h1 id="第六章-堡垒机-⭐" tabindex="-1">第六章：堡垒机（⭐） <a class="header-anchor" href="#第六章-堡垒机-⭐" aria-label="Permalink to &quot;第六章：堡垒机（⭐）&quot;">​</a></h1><h2 id="_6-1-概述" tabindex="-1">6.1 概述 <a class="header-anchor" href="#_6-1-概述" aria-label="Permalink to &quot;6.1 概述&quot;">​</a></h2><ul><li>之前，我们对于 Linux 的操作，都是通过 xshell 来<code>直接</code>进行远程连接的，即：</li></ul><p><img src="/linux/assets/72.BhOc6uQM.png" alt=""></p><ul><li>但是，这样是有安全隐患的，比如：直接将 <code>22</code> 端口暴露到外网上，可能会遭受攻击；所以，<code>跳板机</code>和<code>堡垒机</code>就应用而生了，即：</li></ul><p><img src="/linux/assets/73.C4ZiKRU6.png" alt=""></p><blockquote><p>注意⚠️：</p><ul><li>① 之所以使用<code>堡垒机</code>或<code>跳板机</code>，是因为人是趋利避害的性格，可能为了掩饰自己的错误行为，在使用 xshell 远程连接到 Linux 服务器上的时候（操作记录存放在 Linux 服务器上），会将自己的操作记录删除；而通过堡垒机或跳板机远程连接 Linux 服务器（操作记录存放在堡垒机或跳板机上），是不能将自己的操作记录删除的。</li><li>② 使用<code>跳板机</code>或<code>堡垒机</code>，在未来的场景中，只需要开放<code>跳板机</code>或<code>堡垒机</code>的端口就可以了，避免了直接暴露内部网络资源给外部网络带来的安全风险。</li><li>③ 通常而言，<code>跳板机</code>侧重于提供<code>安全</code>的<code>远程访问</code>和<code>操作平台</code>，而<code>堡垒机</code>更侧重于<code>安全防护</code>和<code>审计</code>。</li></ul></blockquote><ul><li>堡垒机的产品：</li></ul><table><thead><tr><th>堡垒机的产品</th><th>说明</th></tr></thead><tbody><tr><td>开源软件</td><td>Teleport 、JumpServer、CMDB、Next Terminal、Spug、CODO、OpsCloud</td></tr><tr><td>物理硬件设备</td><td>需要自己购买。</td></tr><tr><td>云服务</td><td>需要自己购买，阿里云等云厂商都提供有对应的服务。</td></tr></tbody></table><blockquote><p>注意⚠️：本次将以 <code>Next Terminal</code> 作为演示！！！</p></blockquote><h2 id="_6-2-关闭防火墙和-selinux" tabindex="-1">6.2 关闭防火墙和 SELinux <a class="header-anchor" href="#_6-2-关闭防火墙和-selinux" aria-label="Permalink to &quot;6.2 关闭防火墙和 SELinux&quot;">​</a></h2><h3 id="_6-2-1-关闭防火墙" tabindex="-1">6.2.1 关闭防火墙 <a class="header-anchor" href="#_6-2-1-关闭防火墙" aria-label="Permalink to &quot;6.2.1 关闭防火墙&quot;">​</a></h3><ul><li>查询防火墙是否运行：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/74.D0KGL32J.gif" alt=""></p><ul><li>关闭防火墙：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 临时关闭</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stop</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重启生效</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/linux/assets/75.DMuxDuwz.gif" alt=""></p><ul><li>查询防火墙是否运行：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> firewalld</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/76.DJYV2dN4.gif" alt=""></p><h3 id="_6-2-2-关闭-selinux" tabindex="-1">6.2.2 关闭 SELinux <a class="header-anchor" href="#_6-2-2-关闭-selinux" aria-label="Permalink to &quot;6.2.2 关闭 SELinux&quot;">​</a></h3><ul><li>查看 SELinux 是否运行：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 结果是 permissive 或 disabled 都表示关闭，结果是 enforcing 表示开启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getenforce</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/linux/assets/77.DJ2k-JpR.gif" alt=""></p><ul><li>关闭 SELinux：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">setenforce</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 临时关闭</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -i</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;s/SELINUX=enforcing/SELINUX=disabled/g&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/selinux/config</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 永久关闭，重启生效</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/78.C2PYc5FY.gif" alt=""></p><ul><li>查看 SELinux 是否运行：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 结果是 permissive 或 disabled 都表示关闭，结果是 enforcing 表示开启</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getenforce</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/linux/assets/79.Bn1bXh7q.gif" alt=""></p><h2 id="_6-3-前置准备" tabindex="-1">6.3 前置准备 <a class="header-anchor" href="#_6-3-前置准备" aria-label="Permalink to &quot;6.3 前置准备&quot;">​</a></h2><h3 id="_6-3-1-安装-apache-guacamole-server" tabindex="-1">6.3.1 安装 Apache Guacamole-Server <a class="header-anchor" href="#_6-3-1-安装-apache-guacamole-server" aria-label="Permalink to &quot;6.3.1 安装 Apache Guacamole-Server&quot;">​</a></h3><ul><li>安装 guacd ：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dnf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> epel-release</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dnf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> libguac-client-kubernetes</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    libguac-client-rdp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    libguac-client-ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    libguac-client-telnet</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    libguac-client-vnc</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    guacd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><img src="/linux/assets/80.DI8e-1QK.gif" alt=""></p><ul><li>配置 guacd 服务：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/guacamole/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;&gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/guacamole/guacd.conf</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[daemon]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">pid_file = /var/run/guacd.pid</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">log_level = info</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[server]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"># 监听地址</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bind_host = 127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bind_port = 4822</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="/linux/assets/81.BS8-ypDE.gif" alt=""></p><ul><li>修改 <code>/usr/lib/systemd/system/guacd.service</code> 文件中的 User 和 Group 两行，以避免权限问题，即：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/lib/systemd/system/guacd.service</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-txt vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">txt</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>[Unit]</span></span>
<span class="line"><span>Description=Guacamole proxy daemon</span></span>
<span class="line"><span>Documentation=man:guacd(8)</span></span>
<span class="line"><span>After=network.target</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Service]</span></span>
<span class="line"><span>EnvironmentFile=-/etc/sysconfig/guacd</span></span>
<span class="line"><span>Environment=HOME=/var/lib/guacd</span></span>
<span class="line"><span>ExecStart=/usr/sbin/guacd -f $OPTS</span></span>
<span class="line"><span>Restart=on-failure</span></span>
<span class="line highlighted"><span># User=guacd 注释</span></span>
<span class="line highlighted"><span># Group=guacd 注释</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[Install]</span></span>
<span class="line"><span>WantedBy=multi-user.target</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="/linux/assets/82.BCO0JBzH.gif" alt=""></p><ul><li>启动 guard 服务：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重载服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daemon-reload</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开机自启以及立即启动</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guacd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> guacd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/linux/assets/83.7xhoq2xp.gif" alt=""></p><h3 id="_6-3-2-安装字体" tabindex="-1">6.3.2 安装字体 <a class="header-anchor" href="#_6-3-2-安装字体" aria-label="Permalink to &quot;6.3.2 安装字体&quot;">​</a></h3><ul><li>安装字体管理软件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dnf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> fontconfig</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mkfontscale</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/84.ChLEhFE6.gif" alt=""></p><ul><li>下载字体文件并移动到 <code>/usr/share/fonts/</code> 目录下：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /usr/share/fonts/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 下载英文字体</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://gitee.com/dushixiang/next-terminal/raw/master/guacd/fonts/Menlo-Regular.ttf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 下载中文字体</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://gitee.com/dushixiang/next-terminal/raw/master/guacd/fonts/SourceHanSansCN-Regular.otf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/linux/assets/85.D8RrhbGn.gif" alt=""></p><ul><li>更新字体：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkfontscale</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkfontdir</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">fc-cache</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/86.C2qbT2k0.gif" alt=""></p><h2 id="_6-4-安装堡垒机-next-terminal" tabindex="-1">6.4 安装堡垒机 -- Next Terminal <a class="header-anchor" href="#_6-4-安装堡垒机-next-terminal" aria-label="Permalink to &quot;6.4 安装堡垒机 -- Next Terminal&quot;">​</a></h2><ul><li>下载软件安装包：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/dushixiang/next-terminal/releases/download/v1.3.9/next-terminal.tar.gz</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/87.C7Ypzch8.gif" alt=""></p><ul><li>解压到指定目录：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tar</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -zxvf</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next-terminal.tar.gz</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -C</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/88.CrUD81DK.gif" alt=""></p><ul><li>修改 <code>/usr/local/next-terminal/config.yaml</code> 文件：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/next-terminal/config.yaml</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-yaml vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">debug</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">db</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">sqlite</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # sqlite 或 mysql</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># mysql:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # hostname: localhost</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # port: 3306</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # username: next-terminal</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # password: next-terminal</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # database: next-terminal</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">sqlite</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;./data/sqlite/next-terminal.db&#39;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">server</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0.0.0.0:8088</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#  当设置下面两个参数时会自动开启https模式(前提是证书文件存在)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#  cert: /root/next-terminal/cert.pem</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#  key: /root/next-terminal/key.pem</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">guacd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  hostname</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">127.0.0.1</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4822</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 此路径需要为绝对路径，并且 next-terminal 和 guacd 都能访问到</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  recording</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/usr/local/next-terminal/data/recording&#39;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 此路径需要为绝对路径，并且 next-terminal 和 guacd 都能访问到</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  drive</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/usr/local/next-terminal/data/drive&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">sshd</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 是否开启 sshd 服务</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  enable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # sshd 监听地址，未开启 sshd 服务时此配置不会使用</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  addr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">0.0.0.0:2022</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # sshd 使用的私钥地址，未开启 sshd 服务时此配置不会使用</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  key</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">~/.ssh/id_rsa</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><p><img src="/linux/assets/89.a_7YCPlO.gif" alt=""></p><ul><li>启动：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/next-terminal/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./next-terminal</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/90.BBvGv3xM.gif" alt=""></p><ul><li>创建 <code>next-terminal</code> 系统服务文件，以便通过 <code>systemctl</code> 命令来管理堡垒机：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/systemd/system/next-terminal.service</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &lt;&lt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[Unit]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Description=next-terminal service</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">After=network.target</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[Service]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">User=root</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">WorkingDirectory=/usr/local/next-terminal</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">ExecStart=/usr/local/next-terminal/next-terminal</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">Restart=on-failure</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">LimitNOFILE=1048576</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">[Install]</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">WantedBy=multi-user.target</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">EOF</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><img src="/linux/assets/91.RZdsspCr.gif" alt=""></p><ul><li>启动 <code>next-terminal</code> 服务：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 重载服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daemon-reload</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 开机自启以及立即启动</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --now</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next-terminal</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 查看状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> status</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> next-terminal</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><img src="/linux/assets/92.CKLLQiZ8.gif" alt=""></p><h2 id="_6-5-访问和配置堡垒机" tabindex="-1">6.5 访问和配置堡垒机 <a class="header-anchor" href="#_6-5-访问和配置堡垒机" aria-label="Permalink to &quot;6.5 访问和配置堡垒机&quot;">​</a></h2><ul><li>通过浏览器访问 <code>http://192.168.10.100:8088</code>，管理员的账号和密码是 <code>admin/admin</code> ，即：</li></ul><p><img src="/linux/assets/93.p4foJXUR.gif" alt=""></p><ul><li>在<code>资产管理 --&gt; 资产管理</code>中配置远程 Linux 服务器的信息，如：</li></ul><p><img src="/linux/assets/94.DIbd8jlk.gif" alt=""></p><blockquote><p>注意⚠️：</p><ul><li>① 本次将<code>Next Terminal</code> 和远程 Linux 服务器配置在一台机器上；</li><li>② 在实际工作中，<code>Next Terminal</code> 所在的服务器和远程 Linux 服务器是不同的服务器。</li></ul></blockquote><ul><li>在 <code>资产管理 --&gt; 资产管理</code> 中<code>操作</code>的<code>接入</code>中，就可以远程操作 Linux 了，即：</li></ul><p><img src="/linux/assets/95.kSJ3ISbt.gif" alt=""></p><ul><li>在<code>会话审计 --&gt; 在线会话 或 历史会话</code> 中，可以通过<code>监控或回放</code>查看 Linux 的操作，即：</li></ul><p><img src="/linux/assets/96.DDg1wZNe.gif" alt=""></p><h1 id="第七章-补充" tabindex="-1">第七章：补充 <a class="header-anchor" href="#第七章-补充" aria-label="Permalink to &quot;第七章：补充&quot;">​</a></h1><h2 id="_7-1-getent" tabindex="-1">7.1 getent <a class="header-anchor" href="#_7-1-getent" aria-label="Permalink to &quot;7.1 getent&quot;">​</a></h2><h3 id="_7-1-1-概述" tabindex="-1">7.1.1 概述 <a class="header-anchor" href="#_7-1-1-概述" aria-label="Permalink to &quot;7.1.1 概述&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [key]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>功能：从<code>系统数据库</code>中根据<code>指定的 key</code> 查询出<code>想要的信息</code>。</li><li>对应的英文：get entries from administrative database 。</li></ul><blockquote><p>注意⚠️：database 可以是 ahosts、ahostsv4、ahostsv6、aliases、ethers、group、gshadow、hosts、initgroups、netgroup、networks、passwd、protocols、rpc、services、shadow。</p></blockquote><ul><li>应用场景： <ul><li>查询用户信息：通过 <code>getent passwd</code> 命令，可以查看系统中的用户账户信息。</li><li>查询用户组信息：使用 <code>getent group</code> 可以查看用户组及其成员。</li><li>查询主机信息：通过 <code>getent hosts</code> 可以查看主机名与 IP 地址的映射。</li><li>查询服务信息：<code>getent services</code> 用于查看系统中的服务及其对应的端口号。</li><li>查询网络协议：<code>getent protocols</code> 可以列出网络协议及其编号。</li></ul></li></ul><h3 id="_7-1-2-案例" tabindex="-1">7.1.2 案例 <a class="header-anchor" href="#_7-1-2-案例" aria-label="Permalink to &quot;7.1.2 案例&quot;">​</a></h3><ul><li><p>需求 ① ：查看系统中的指定用户的信息。</p></li><li><p>示例：</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/passwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaoming</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/97.CgSwBeZm.gif" alt=""></p><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> passwd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaoming</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/98.Ce6lfCtc.gif" alt=""></p><ul><li><p>需求 ② ：查看系统中的指定用户密码的信息。</p></li><li><p>示例：</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/shadow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaoming</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/99.BHcvRWvd.gif" alt=""></p><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shadow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaoming</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/100.COOiATa6.gif" alt=""></p><ul><li><p>需求 ③ ：查看系统中的指定用户组的信息。</p></li><li><p>示例：</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/group</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaoming</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/101.BCcdXrCB.gif" alt=""></p><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> group</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaoming</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/102.BrsgwlDA.gif" alt=""></p><ul><li><p>需求 ④ ：查看系统中的指定用户组密码的信息。</p></li><li><p>示例：</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/gshadow</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaoming</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/103.CoLt9YQR.gif" alt=""></p><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gshadow</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> xiaoming</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/104.ClL5MEiU.gif" alt=""></p><h3 id="_7-1-3-案例" tabindex="-1">7.1.3 案例 <a class="header-anchor" href="#_7-1-3-案例" aria-label="Permalink to &quot;7.1.3 案例&quot;">​</a></h3><ul><li><p>需求：查询主机信息。</p></li><li><p>示例：</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/hosts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/105.DJNSn8hM.gif" alt=""></p><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">gentent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hosts</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/106.zNHxibor.gif" alt=""></p><h3 id="_7-1-4-案例" tabindex="-1">7.1.4 案例 <a class="header-anchor" href="#_7-1-4-案例" aria-label="Permalink to &quot;7.1.4 案例&quot;">​</a></h3><ul><li><p>需求：查询服务信息（服务和端口）。</p></li><li><p>示例：</p></li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">netstat</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -anp</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> grep</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/107.BWasPEuc.gif" alt=""></p><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> services</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/108.Cldv_HF5.gif" alt=""></p><h2 id="_7-2-批量用户操作" tabindex="-1">7.2 批量用户操作 <a class="header-anchor" href="#_7-2-批量用户操作" aria-label="Permalink to &quot;7.2 批量用户操作&quot;">​</a></h2><h3 id="_7-3-1-批量创建或更新用户" tabindex="-1">7.3.1 批量创建或更新用户 <a class="header-anchor" href="#_7-3-1-批量创建或更新用户" aria-label="Permalink to &quot;7.3.1 批量创建或更新用户&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">newusers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 文件</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>应用场景：适合于迁移多个用户到新的 Linux 操作系统中。</li></ul><p><img src="/linux/assets/109.D3V8xM3g.png" alt=""></p><ul><li>示例：导出指定用户信息到文件中</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">tail</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -n</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/passwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> abc.txt</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/110.DpzM_1kb.gif" alt=""></p><ul><li>示例：通过 <code>scp</code> 命令传递该文件到指定的操作系统</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">scp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> abc.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root@192.168.10.120:~/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/111.BRUuwuGG.gif" alt=""></p><ul><li>示例：批量创建或更新用户信息</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">newusers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> abc.txt</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/112.CkNX55e0.gif" alt=""></p><h3 id="_7-3-2-批量更新密码" tabindex="-1">7.3.2 批量更新密码 <a class="header-anchor" href="#_7-3-2-批量更新密码" aria-label="Permalink to &quot;7.3.2 批量更新密码&quot;">​</a></h3><ul><li>命令：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;用户名:密码&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> chpasswd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><blockquote><p>注意⚠️：chpasswd 和 passwd 类似，都是交互式命令；所以，chpasswd 通常配合管道使用。</p></blockquote><ul><li>示例：</li></ul><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">echo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;x:123456&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;y:123456&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;z:123456&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> |</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> chpasswd</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="/linux/assets/113.CeHmmTzS.gif" alt=""></p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-d4a0bba5><!--[--><!--]--><div class="edit-info" data-v-d4a0bba5><!----><div class="last-updated" data-v-d4a0bba5><p class="VPLastUpdated" data-v-d4a0bba5 data-v-7e05ebdb>上次更新: <time datetime="2024-05-21T13:40:09.000Z" data-v-7e05ebdb></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-d4a0bba5><span class="visually-hidden" id="doc-footer-aria-label" data-v-d4a0bba5>Pager</span><div class="pager" data-v-d4a0bba5><a class="VPLink link pager-link prev" href="/linux/notes/01_linux_basic/11_xdx/" data-v-d4a0bba5><!--[--><span class="desc" data-v-d4a0bba5>上一篇</span><span class="title" data-v-d4a0bba5>SHELL 脚本编程（一）</span><!--]--></a></div><div class="pager" data-v-d4a0bba5><a class="VPLink link pager-link next" href="/linux/notes/01_linux_basic/13_xdx/" data-v-d4a0bba5><!--[--><span class="desc" data-v-d4a0bba5>下一篇</span><span class="title" data-v-d4a0bba5>Linux 权限管理体系</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>Released under the MIT License.</p><p class="copyright" data-v-e315a0ad>Copyright © 2024 许大仙</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"BAPqStN4\",\"notes_01_linux_basic_02_xdx_index.md\":\"DHRy22MW\",\"notes_01_linux_basic_00_xdx_index.md\":\"DQQ4VeRy\",\"notes_index.md\":\"gMtyUzBj\",\"notes_01_linux_basic_14_xdx_index.md\":\"BGzsQ2Uf\",\"notes_01_linux_basic_05_xdx_index.md\":\"r07-Npcm\",\"notes_01_linux_basic_03_xdx_index.md\":\"CyUQau3P\",\"notes_01_linux_basic_16_xdx_index.md\":\"BR36a0ww\",\"notes_01_linux_basic_10_xdx_index.md\":\"CELWpHlo\",\"notes_01_linux_basic_08_xdx_index.md\":\"B3QzxgBo\",\"notes_01_linux_basic_13_xdx_index.md\":\"CGaODdnv\",\"notes_01_linux_basic_12_xdx_index.md\":\"vcmOmoue\",\"notes_01_linux_basic_01_xdx_index.md\":\"h5-2NsPB\",\"notes_01_linux_basic_09_xdx_index.md\":\"pfFbao57\",\"notes_01_linux_basic_06_xdx_index.md\":\"UXXAH-MI\",\"notes_01_linux_basic_07_xdx_index.md\":\"CBfFLgxe\",\"notes_01_linux_basic_15_xdx_index.md\":\"33nmALSs\",\"notes_01_linux_basic_04_xdx_index.md\":\"CkuD29rL\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"许大仙\",\"titleTemplate\":\"Hi，终于等到你\",\"description\":\"许大仙前端、Java、大数据、云原生\",\"base\":\"/linux/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"lastUpdatedText\":\"上次更新\",\"returnToTopLabel\":\"返回顶部\",\"search\":{\"provider\":\"local\"},\"logo\":\"/logo.svg\",\"nav\":[{\"text\":\"首页\",\"link\":\"https://aexiar.github.io/\"},{\"text\":\"计组4件套\",\"link\":\"https://aexiar.github.io/coa4/notes/\"},{\"text\":\"前端\",\"link\":\"https://aexiar.github.io/web-design/notes/\"},{\"text\":\"Java\",\"link\":\"https://aexiar.github.io/java/notes/\"},{\"text\":\"大数据\",\"link\":\"https://aexiar.github.io/big-data/notes/\"},{\"text\":\"云原生\",\"link\":\"/notes/\"},{\"text\":\"开源软件\",\"link\":\"https://aexiar.github.io/open-software/notes/\"}],\"sidebar\":{\"/notes/\":[{\"text\":\"Linux基础\",\"collapsed\":true,\"items\":[{\"text\":\"计算机硬件与组成原理基础\",\"link\":\"/notes/01_linux_basic/00_xdx/\"},{\"text\":\"Linux 初识和安装\",\"link\":\"/notes/01_linux_basic/01_xdx/\"},{\"text\":\"Linux 基础和入门\",\"link\":\"/notes/01_linux_basic/02_xdx/\"},{\"text\":\"Linux 核心目录和必会命令\",\"link\":\"/notes/01_linux_basic/03_xdx/\"},{\"text\":\"Linux 目录进阶（一）\",\"link\":\"/notes/01_linux_basic/04_xdx/\"},{\"text\":\"Linux 目录进阶（二）\",\"link\":\"/notes/01_linux_basic/05_xdx/\"},{\"text\":\"Linux 文件管理体系\",\"link\":\"/notes/01_linux_basic/06_xdx/\"},{\"text\":\"Linux 标准 IO、重定向和管道\",\"link\":\"/notes/01_linux_basic/07_xdx/\"},{\"text\":\"文本编辑器之神 VIM\",\"link\":\"/notes/01_linux_basic/08_xdx/\"},{\"text\":\"Linux 四剑客（一）\",\"link\":\"/notes/01_linux_basic/09_xdx/\"},{\"text\":\"正则表达式\",\"link\":\"/notes/01_linux_basic/10_xdx/\"},{\"text\":\"SHELL 脚本编程（一）\",\"link\":\"/notes/01_linux_basic/11_xdx/\"},{\"text\":\"Linux 用户管理体系\",\"link\":\"/notes/01_linux_basic/12_xdx/\"},{\"text\":\"Linux 权限管理体系\",\"link\":\"/notes/01_linux_basic/13_xdx/\"},{\"text\":\"Linux 之快速安装 Ubuntu\",\"link\":\"/notes/01_linux_basic/14_xdx/\"},{\"text\":\"Linux 软件包管理（一）\",\"link\":\"/notes/01_linux_basic/15_xdx/\"},{\"text\":\"Linux 软件包管理（二）\",\"link\":\"/notes/01_linux_basic/16_xdx/\"},{\"text\":\"Linux 四剑客（二）\",\"link\":\"/notes/01_linux_basic/17_xdx/\"},{\"text\":\"Linux 磁盘存储和文件系统管理\",\"link\":\"/notes/01_linux_basic/18_xdx/\"},{\"text\":\"计算机网络基础\",\"link\":\"/notes/01_linux_basic/19_xdx/\"},{\"text\":\"Linux 网络管理\",\"link\":\"/notes/01_linux_basic/20_xdx/\"},{\"text\":\"SHELL 脚本编程（二）\",\"link\":\"/notes/01_linux_basic/21_xdx/\"},{\"text\":\"Linux 进程管理\",\"link\":\"/notes/01_linux_basic/22_xdx/\"},{\"text\":\"Linux 定时任务管理\",\"link\":\"/notes/01_linux_basic/23_xdx/\"},{\"text\":\"Linux 启动和内核管理\",\"link\":\"/notes/01_linux_basic/24_xdx/\"},{\"text\":\"加密和安全\",\"link\":\"/notes/01_linux_basic/25_xdx/\"},{\"text\":\"运维自动化之系统部署\",\"link\":\"/notes/01_linux_basic/26_xdx/\"},{\"text\":\"域名系统 DNS 服务\",\"link\":\"/notes/01_linux_basic/27_xdx/\"}]},{\"text\":\"Linux集群\",\"collapsed\":true,\"items\":[]},{\"text\":\"Linux自动化\",\"collapsed\":true,\"items\":[]},{\"text\":\"Linux日志收集\",\"collapsed\":true,\"items\":[]},{\"text\":\"云原生生态\",\"collapsed\":true,\"items\":[]},{\"text\":\"虚拟化和云计算\",\"collapsed\":true,\"items\":[]},{\"text\":\"容器管理工具Docker\",\"collapsed\":true,\"items\":[]},{\"text\":\"容器管理工具Containerd\",\"collapsed\":true,\"items\":[]},{\"text\":\"Kubernetes\",\"collapsed\":true,\"items\":[]},{\"text\":\"数据库\",\"collapsed\":true,\"items\":[]},{\"text\":\"微服务治理和服务网格\",\"collapsed\":true,\"items\":[]},{\"text\":\"下一代云计算技术Serverless\",\"collapsed\":true,\"items\":[]},{\"text\":\"基于Kubernetes构建大数据库生态圈\",\"collapsed\":true,\"items\":[]},{\"text\":\"其它\",\"collapsed\":true,\"items\":[]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Aurorxa\"}],\"docFooter\":{\"prev\":\"上一篇\",\"next\":\"下一篇\"},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2024 许大仙\"},\"outline\":{\"level\":[1,6],\"label\":\"目录\"},\"outlineTitle\":\"当前页大纲\"},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>